<% 
<% var COMMAND = "sudo iwlist wlan0 scan | grep ESSID | grep -o -E '\".+' | grep -o -E '[^\"]+'"; %>
<%    exec(COMMAND, function(error, stdout, stderr) { %>
<%        if (error !== null) { %>
<%            console.log('exec error: ' + error); %>
<%            return; %>
<%        } %>
<%        ssidList = stdout.split(/\r\n|\r|\n/); %>
<%        console.log('stdout: ' + ssidList); %>
<%        console.log(ssidList[1]); %>
<%    }); %>
<h2> WiFi 接続設定 </h2>
<p><%= message %></p>
<hr>
<form method="post" action="/inputPASS" id="form">
<table>
    <tr><td>SSID:</td><td>
    <select type="text" name="ssid">
        <% for (var i=0;i < ssidList.length; i++ ) { %>
        <option><%= ssidList[i] %></option>
        <% } %>
    </select></td></tr>
    <tr><td></td><td><input type="submit" value="このSSIDに接続します"></td></tr>
</table>
</form>
<script>
document.getElementById('form').onsubmit = function(){
    var keyword = document.getElementById('form').ssid.value;
    if (keyword.length < 1){
        window.alert('接続したいwifiのSSIDを選んでください');
        return false;
    }
}
</script>
